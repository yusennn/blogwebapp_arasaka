{% extends 'blog/base.html' %}

{% block title %}{{ post.title }}{% endblock %}

{% block description %}
    <div class="container">
        <div class="row">
            <div class="col-md-8 mx-auto">
                <article>
                    <h2>{{ post.title }}</h2>
                    <img src="{{ post.image.url }}" alt="{{ post.title }}" class="img-fluid mb-4">
                    <p>{{ post.description }}</p>
                    <h5><em>Автор: {{ post.author }}</em> <br> <em>{{ post.created_at }}</em></h5>
                </article>
                {% if post.is_registration_post %}
                    {% if not user.is_authenticated %}
                        <p>You need to be logged in to register for this event.</p>
                        <a href="{% url 'login' %}?next={{ request.path }}">Log in</a>
                    {% else %}
                        <form method="POST" action="{% url 'register_post' pk=post.pk %}">
                            {% csrf_token %}
                            {{ form.as_p }}
                            <button type="submit">Register</button>
                        </form>
                        <a href="{% url 'get_registered_users' post.id %}">View registered users</a>
                    {% endif %}
                {% endif %}
                </form>
            </div>
        </div>
    </div>
{% endblock %}
