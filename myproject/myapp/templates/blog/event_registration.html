<head>
  {% load static %}
  <link rel="stylesheet" type="text/css" href="{% static 'css/bootstrap.min.css' %}">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
</head>
{% block content %}
<body>
  <div class="container my-5">
    <div class="row justify-content-center">
      <div class="col-md-8">
        <div class="card">
          <div class="card-header bg-primary text-white">
            <h4>Register for {{ event.title }}</h4>
          </div>
          <div class="card-body">
            <form method="POST" class="form">
              {% csrf_token %}
              <input type="hidden" name="event_pk" value="{{ event.pk }}">
              {% for field in form %}
                <div class="form-group">
                  {{ field.label_tag }}
                  {% if field.name == 'email' %}
                    {{ field }}
                    <small class="form-text text-muted">We'll never share your email with anyone else.</small>
                  {% else %}
                    {{ field }}
                  {% endif %}
                  {% if field.help_text %}
                    <small class="form-text text-muted">{{ field.help_text }}</small>
                  {% endif %}
                  {% for error in field.errors %}
                    <div class="invalid-feedback">{{ error }}</div>
                  {% endfor %}
                </div>
              {% endfor %}
              <button type="submit" class="btn btn-primary">Register</button>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>

<script>
$(document).ready(function() {
  // Handle registration button click
  $('button[data-target="#registrationModal"]').click(function() {
    $.ajax({
      url: "{% url 'event_registration' pk=event.pk %}",
      success: function(data) {
        $('#registrationModal .modal-body').html(data);
      }
    });
  });
});
</script>
</body>  
{% endblock %}
